<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<title>Cart Details</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>
	<div class="container mt-4">
		<h1 class="text-center">Cart Details</h1>
		<div class="mb-4">
			<a href="/" class="btn btn-primary"><i class="bi bi-house"></i> Return Home</a>
		</div>

		<div>
			<h3>Cart Information</h3>
			<table class="table table-striped table-bordered table-hover">
				<thead class="thead-dark">
					<tr>
						<th scope="col">Cart ID</th>
						<th scope="col">Last Update Date</th>
						<th scope="col">Customer ID</th>
						<th scope="col">Total Quantity</th>
						<th scope="col">Total Price</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td th:text="${cart.id}"></td>
						<td th:text="${cart.lastUpdateDate}"></td>
						<td th:text="${cart.customerId}"></td>
						<td th:text="${cart.inventoryList.size()}"></td>
						<td th:text="${cart.getTotalPrice()}"></td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="mt-4">
			<h3>Books in Cart</h3>
			<table class="table table-striped table-bordered table-hover">
				<thead class="thead-dark">
					<tr>
						<th scope="col">Book ID</th>
						<th scope="col">Title</th>
						<th scope="col">Author</th>
						<th scope="col">Price</th>
						<th scope="col">Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="inventory : ${cart.inventoryList}">
						<td th:text="${inventory.book.id}"></td>
						<td th:text="${inventory.book.title}"></td>
						<td th:text="${inventory.book.author}"></td>
						<td th:text="${inventory.book.price}"></td>
						<form th:action="@{|/carts/${inventory.book.id}/remove-cart/${cart.customerId}|}" method="post"
							style="display:inline;">
							<button type="submit" class="btn btn-danger btn-sm">
								<i class="bi bi-dash-circle"></i> Remove
							</button>
							</td>
					</tr>
				</tbody>
			</table>
			<form th:action="@{|/carts/${cart.customerId}/clear-cart|}" method="post" style="display:inline;">
				<button type="submit" class="btn btn-warning btn-sm">
					<i class="bi bi-trash"></i> Clear Cart
				</button>
			</form>
		</div>

		<div class="mt-4">
			<h3>Checkout</h3>
			<p>Total Items: <span th:text="${cart.inventoryList.size()}"></span></p>
			<p>Total Price: <span th:text="${cart.totalPrice}"></span></p>
			<a href="/checkout" class="btn btn-success"><i class="bi bi-cart-check"></i> Proceed to Checkout</a>
			<form th:action="@{|/carts/${cart.customerId}/clear-cart|}" method="post" style="display:inline;">
				<button type="submit" class="btn btn-warning"><i class="bi bi-trash"></i> Clear Cart</button>
			</form>
		</div>
	</div>

	<!-- SCRIPT BOOTSTRAP-->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
</body>

</html>